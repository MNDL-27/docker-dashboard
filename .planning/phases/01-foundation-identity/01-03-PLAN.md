---
phase: 01-foundation
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - packages/agent/config/dev.yaml
  - packages/agent/Dockerfile
autonomous: true
requirements:
  - DEV-06

must_haves:
  truths:
    - Agent can run against local Docker
  artifacts:
    - path: packages/agent/config/dev.yaml
      provides: Agent development configuration
      contains: docker endpoint, api url, mode settings
    - path: packages/agent/Dockerfile
      provides: Agent Docker image for local dev
      contains: Go build, agent binary
  key_links:
    - from: packages/agent
      to: docker-compose.dev.yml
      via: service definition
      pattern: agent.*build
---

<objective>
Configure Agent service to run against local Docker for development.
</objective>

<execution_context>
@C:/Users/proti/.config/opencode/get-shit-done/workflows/execute-plan.md
</execution_context>

<context>
@.planning/phases/01-foundation-identity/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create agent dev config</name>
  <files>packages/agent/config/dev.yaml</files>
  <action>
Create packages/agent/config/dev.yaml with:

- docker: Use /var/run/docker.sock (Linux) or named pipe (Windows)
- api: http://localhost:3001
- mode: development
- log_level: debug
- heartbeat_interval: 30s
  </action>
  <verify>
ls packages/agent/config/dev.yaml
  </verify>
  <done>Dev configuration file exists with local Docker and API settings</done>
</task>

<task type="auto">
  <name>Task 2: Ensure agent Dockerfile exists</name>
 files>packages/agent/Dockerfile</files>
  <action>
Check if packages/agent/Dockerfile exists. If not, create minimal Dockerfile for building Go agent:
- Base: golang:1.23-alpine
- Build agent binary
- Minimal runtime: alpine
- Entry point runs agent
  </action>
  <verify>
cat packages/agent/Dockerfile | head -20
  </verify>
  <done>Agent Dockerfile exists and is buildable</done>
</task>

</tasks>

<verification>
Build agent Docker image: docker build -t docker-dashboard-agent:dev -f packages/agent/Dockerfile packages/agent/
</verification>

<success_criteria>
Agent container can connect to local Docker daemon and API
</success_criteria>

<output>
After completion, create .planning/phases/01-foundation-identity/01-03-SUMMARY.md
</output>
