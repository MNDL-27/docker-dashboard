(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[342],{960:(e,t,s)=>{"use strict";s.d(t,{n:()=>l});let a=s(5704).env.NEXT_PUBLIC_API_URL||"http://localhost:3001";async function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{method:s="GET",body:l,headers:n={}}=t,i=await fetch("".concat(a).concat(e),{method:s,headers:{"Content-Type":"application/json",...n},credentials:"include",body:l?JSON.stringify(l):void 0});if(!i.ok)throw Error((await i.json().catch(()=>({error:"Request failed"}))).error||"HTTP ".concat(i.status));return i.json()}},7403:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});var a=s(5155),l=s(2115),n=s(960),i=s(4662);function r(){let[e,t]=(0,l.useState)([]),[s,r]=(0,l.useState)(!0),[d,c]=(0,l.useState)(null);return((0,l.useEffect)(()=>{!async function(){try{let e=await (0,n.n)("/api/audit");t(e.logs)}catch(e){c(e.message||"Failed to fetch audit logs")}finally{r(!1)}}()},[]),s)?(0,a.jsx)("div",{className:"p-8 text-slate-400 font-medium",children:"Loading audit trail..."}):d?(0,a.jsx)("div",{className:"p-8 max-w-7xl mx-auto",children:(0,a.jsx)("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-6 text-red-400",children:d})}):(0,a.jsxs)("div",{className:"p-8 max-w-7xl mx-auto",children:[(0,a.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-slate-100 mb-2",children:"Audit Trail"}),(0,a.jsx)("p",{className:"text-slate-400 text-sm",children:"View all actions performed within your organization."})]})}),(0,a.jsx)("div",{className:"bg-slate-900 border border-slate-800 rounded-lg overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,a.jsx)("thead",{className:"bg-slate-800/50 text-slate-400 uppercase text-xs font-semibold tracking-wider",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-4",children:"Timestamp"}),(0,a.jsx)("th",{className:"px-6 py-4",children:"User"}),(0,a.jsx)("th",{className:"px-6 py-4",children:"Action"}),(0,a.jsx)("th",{className:"px-6 py-4",children:"Target Container"}),(0,a.jsx)("th",{className:"px-6 py-4 min-w-[200px]",children:"Reason"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right",children:"Status"})]})}),(0,a.jsxs)("tbody",{className:"divide-y divide-slate-800/50",children:[e.map(e=>{var t,s;return(0,a.jsxs)("tr",{className:"hover:bg-slate-800/50 transition-colors",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-slate-300 font-mono text-xs",children:(0,i.GP)(new Date(e.timestamp),"MMM d, yyyy HH:mm:ss")}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("div",{className:"text-slate-200 font-medium",children:(null==(t=e.user)?void 0:t.email)||"System"}),(null==(s=e.user)?void 0:s.name)&&(0,a.jsx)("div",{className:"text-slate-500 text-xs",children:e.user.name})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-semibold\n                      ".concat("START"===e.action?"bg-emerald-500/10 text-emerald-400":"STOP"===e.action?"bg-red-500/10 text-red-400":"bg-amber-500/10 text-amber-400"),children:e.action})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-slate-400 font-mono text-xs",children:e.targetId.substring(0,12)}),(0,a.jsx)("td",{className:"px-6 py-4 text-slate-300",children:e.reason||(0,a.jsx)("span",{className:"text-slate-600 italic",children:"None provided"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:(0,a.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium\n                      ".concat("SUCCESS"===e.status?"text-emerald-400":"text-red-400"),children:["SUCCESS"===e.status?(0,a.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}):(0,a.jsx)("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500"}),e.status]})})]},e.id)}),0===e.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"px-6 py-8 text-center text-slate-500 italic",children:"No actions have been audited yet."})})]})]})})})]})}},9660:(e,t,s)=>{Promise.resolve().then(s.bind(s,7403))}},e=>{e.O(0,[662,441,255,358],()=>e(e.s=9660)),_N_E=e.O()}]);